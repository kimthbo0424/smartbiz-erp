<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"
      th:replace="~{base :: layout(~{::section})}">
<body>
<section>

    <h2 class="fw-bold mb-4">카테고리 수정</h2>

    <form th:action="@{/category/edit/{id}(id=${category.id})}"
          method="post">

        <input type="hidden"
               th:if="${_csrf != null}"
               th:name="${_csrf.parameterName}"
               th:value="${_csrf.token}">

        <div class="mb-3">
            <label class="form-label">카테고리명</label>
            <input type="text"
                   class="form-control"
                   name="name"
                   th:value="${category.name}"
                   required>
        </div>

        <div class="mb-3">
            <label class="form-label">부모 카테고리</label>
            <select class="form-select" name="parentId">
                <option value="">(없음)</option>
                <option th:each="c : ${parents}"
                        th:value="${c.id}"
                        th:selected="${category.parent != null and c.id == category.parent.id}"
                        th:text="${c.name}">
                </option>
            </select>
            <div class="form-text">
                부모 변경 시 카테고리 레벨은 자동으로 조정됩니다.
            </div>
        </div>

        <div class="form-check mb-3">
            <input class="form-check-input"
                   type="checkbox"
                   name="isActive"
                   value="true"
                   th:checked="${category.isActive}">
            <label class="form-check-label">활성화</label>
        </div>

        <button type="submit" class="btn btn-primary">저장</button>
        <a th:href="@{/category/list}" class="btn btn-outline-secondary">취소</a>

    </form>

</section>
</body>
</html>