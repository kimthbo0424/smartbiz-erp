<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"
      th:replace="~{base :: layout(~{::section})}">

<body>
<section>
    <h2 class="fw-bold mb-4">창고 등록</h2>

    <div class="bg-white p-4 rounded shadow-sm">

        <div class="row g-3">

            <div class="col-md-6">
                <label class="form-label fw-bold">창고명 *</label>
                <input type="text" id="name" class="form-control" required>
            </div>

            <div class="col-md-6">
                <label class="form-label fw-bold">창고 코드</label>
                <input type="text" id="code" class="form-control" placeholder="예: WH001">
            </div>

            <div class="col-12">
                <label class="form-label fw-bold">위치</label>
                <input type="text" id="location" class="form-control" placeholder="예: 서울시 강남구 ○○동">
            </div>

            <div class="col-md-6">
                <label class="form-label fw-bold">담당자</label>
                <input type="text" id="manager" class="form-control">
            </div>

            <div class="col-md-6">
                <label class="form-label fw-bold">수용량</label>
                <input type="number" id="capacity" class="form-control">
            </div>

            <div class="col-md-6">
                <label class="form-label fw-bold">운영 여부</label>
                <select id="isActive" class="form-select">
                    <option value="true">운영 중</option>
                    <option value="false">비활성</option>
                </select>
            </div>

            <div class="mt-4">
                <button class="btn btn-primary" onclick="create()">등록</button>
                <a th:href="@{/warehouse/list}" class="btn btn-outline-secondary">취소</a>
            </div>

        </div>

    </div>

<script>
    function create() {
        const data = {
            name: document.getElementById("name").value,
            code: document.getElementById("code").value,
            location: document.getElementById("location").value,
            manager: document.getElementById("manager").value,
            capacity: document.getElementById("capacity").value,
            isActive: document.getElementById("isActive").value === "true"
        };

        if (!data.name) {
            alert("창고명은 필수입니다.");
            return;
        }

        fetch("/api/warehouse", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        })
        .then(res => {
            if (res.ok) {
                location.href = "/warehouse/list";
            } else {
                alert("창고 등록에 실패했습니다.");
            }
        });
    }
</script>

</section>
</body>
</html>
